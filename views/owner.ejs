<!DOCTYPE html>
<html lang="en">

<head>
  <!-- bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
  <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
  <link rel="stylesheet" href="/styles/main.css" type="text/css" />
  <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
  <link rel="stylesheet" href="/styles/owner.css" type="text/css" />

  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">


  <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
  <script type="text/javascript" src="/scripts/app.js"></script>
  <script type="text/javascript" src="/scripts/owner_jquery.js"></script>
  <title>Owner</title>
</head>

<body>
  <%- include('partials/_header', { user: user }) %>
    <section class="view_orders">
      <% for (let order of orders) { %>
        <% if (!order.order_completed_at) { %>
          <div class="each_order">
            <div class="order-<%= order.order_id %>">
              <div class="id_name">
                Order #<%= order.order_id %> for
                  <%= order.name %>
              </div>
              <div class="middle_part">
                <label>Placed at: </label>
                <% const event=new Date(order.placed_time) %>
                  <%= event.toLocaleString('en-GB', { timeZone: 'UTC' }) %>
                    <div class="menu_total">
                      <ul>
                        <% for (const name of order.menu_name) { %>
                          <li>
                            <%= name %>
                          </li>
                          <% } %>
                      </ul>
                      <div class="total_part">
                        <label>Total Number of Items</label>
                        <div class="total_items">
                          <%= order.total_items %>
                        </div>
                      </div>
                    </div>
              </div>
              <div class="counter_form-<%= order.order_id %>">
                <% if (!order.order_started_at) { %>
                  <div class="decline_confirm">
                    <form method="POST" action="/api/owner/decline" class="decline">
                      <input name="orderId" type="hidden" class="order_id" value="<%= order.order_id %>">
                      </input>
                      <div class="decline_input">
                        <input type="submit" value="decline">
                      </div>
                    </form>
                    <form action="" class="confirm_order_form">
                      <input name="orderId" type="hidden" class="order_id" value="<%= order.order_id %>">
                      </input>
                      <input type="submit" value="confirm order">
                    </form>
                  </div>
                  <% } else { %>
                    <div class="started_time">
                      <label>Started at: </label>
                      <% const event=new Date(order.order_started_at) %>
                        <%= event.toLocaleString('en-GB', { timeZone: 'UTC' }) %>
                    </div>
                    <form action="" class="complete_order_form">
                      <input name="orderId" type="hidden" class="order_id" value="<%= order.order_id %>">
                      <input type="submit" value="complete order">
                    </form>
                    <% } %>
              </div>
            </div>
          </div>
          <% } %>
            <% } %>
    </section>
</body>

</html>
